<% content_for :page_title do %><%= show_title(@organisation_client) %><% end %>

<%= render partial: 'stickies/resource_stickies', locals: { resource: @organisation_client } %>

<div id="tabs">
  <ul class="nav">
    <li><a href="#general" class="current"><%= t('.general') %></a></li>
    <li><a href="#upcomming_reservations"><%= t('.upcomming_reservations') %></a></li>
    <li><a href="#past_reservations"><%= t('.past_reservations') %></a></li>
  </ul>

  <div class="tab-wrap">
    <div id="general">
      <dl>
        <dt><%= OrganisationClient.human_attribute_name(:name) %></dt>
        <dd><%= @organisation_client.first_name + (@organisation_client.infix.present? ? @organisation_client.infix + ' ' : ' ') + @organisation_client.last_name %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:email) %></dt>
        <dd><%= @organisation_client.email %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:route) %></dt>
        <dd><%= @organisation_client.route %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:street_number) %></dt>
        <dd><%= @organisation_client.street_number %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:postal_code) %></dt>
        <dd><%= @organisation_client.postal_code %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:administrative_area_level_2) %></dt>
        <dd><%= @organisation_client.administrative_area_level_2 %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:administrative_area_level_1) %></dt>
        <dd><%= @organisation_client.administrative_area_level_1 %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:locality) %></dt>
        <dd><%= @organisation_client.locality %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:country) %></dt>
        <dd><%= @organisation_client.country %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:phone) %></dt>
        <dd><%= @organisation_client.phone %></dd>
        <dt><%= OrganisationClient.human_attribute_name(:mobile_phone) %></dt>
        <dd><%= @organisation_client.mobile_phone %></dd>
      </dl>
    </div>
    <div id="upcomming_reservations">
      <% if @organisation_client.upcomming_reservations(15).empty? %>
        <%= content_tag(:p, t('.no_upcomming_reservations')) %>
      <% else %>
        <%= render partial: 'reservations/table', locals: { reservations: @organisation_client.upcomming_reservations(15) } %>
      <% end %>
      <%= link_to(t('.all_reservations_of_client', client: @organisation_client.instance_name), organisation_organisation_client_reservations_path(@organisation, @organisation_client)) %>
    </div>
    <div id="past_reservations">
      <% if @organisation_client.past_reservations(15).empty? %>
        <%= content_tag(:p, t('.no_past_reservations')) %>
      <% else %>
        <%= render partial: 'reservations/table', locals: { reservations: @organisation_client.past_reservations(15) } %>
      <% end %>
      <%= link_to(t('.all_reservations_of_client', client: @organisation_client.instance_name), organisation_organisation_client_reservations_path(@organisation, @organisation_client)) %>
    </div>
  </div>
</div>

<%= button_link_back_to_index([@organisation, OrganisationClient]) %>
<%= button_link_to_edit([@organisation, @organisation_client]) %>
<%= button_link_to_destroy([@organisation, @organisation_client]) %>